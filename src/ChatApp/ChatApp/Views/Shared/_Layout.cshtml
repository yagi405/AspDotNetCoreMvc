@using ChatApp.Models.Util
@using ChatApp.Models.Extensions
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <partial name="_StyleSheetsPartial" />
    <partial name="_FaviconsPartial" />
</head>
<body>
    <header>
        <div class="wrapper">
            <a class="brand" asp-controller="Chat" asp-action="Index">ChatApp</a>
            <nav>
                <ul>
                    <li><a asp-controller="Chat" asp-action="Index">チャット</a></li>
                    @if (User.IsInRole(RoleConst.Admin))
                    {
                        <li><a asp-controller="User" asp-action="Index">ユーザー管理</a></li>
                    }
                </ul>
                @if (User.Identity.IsAuthenticated)
                {
                    <ul>
                        <li>
                            <a asp-controller="Account" asp-action="Index">@User.UserId()</a>
                        </li>
                    </ul>
                }
            </nav>
        </div>
    </header>
    <div class="wrapper">
        <main role="main">
            @{
                var messages = new[]
                {
                    (CssClass: "notification", Key: AppConst.TempDataKeyMessage),
                    (CssClass: "notification-warning", Key: AppConst.TempDataKeyWarning),
                };

                foreach (var (cssClass, key) in messages)
                {
                    var message = TempData[key]?.ToString();
                    if (!string.IsNullOrEmpty(message))
                    {
                        <div class="@cssClass">
                            @message
                        </div>
                    }
                }
            }
            @RenderBody()
        </main>
    </div>
    <partial name="_FooterPartial" />
    <partial name="_ScriptsPartial" />
</body>
</html>
